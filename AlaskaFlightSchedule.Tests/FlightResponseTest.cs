using System;
using System.Linq;
using AlaskaFlightSchedule.Core.Models;
using AlaskaFlightSchedule.Core.Services;
using Moq;
using MvvmCross.Tests;
using Newtonsoft.Json;
using NUnit.Framework;

namespace AlaskaFlightSchedule.Tests
{
    [TestFixture()]
    public class FlightResponseTest : MvxIoCSupportingTest
    {
        protected override void AdditionalSetup()
        {
            // an automatically Mocked service:
            var restService = new Mock<IRestService>();
            Ioc.RegisterSingleton<IRestService>(restService.Object);
        }

        [Test()]
        public void Json_to_Model_Validation()
        {
            base.Setup(); // from MvxIoCSupportingTest

            var content = "{\r\n  \"flights\": [\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T16:25:06.1750000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"IRROP\",\r\n        \"operatingFlightNumber\": \"404\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 2,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T13:00:00Z\",\r\n              \"in\": \"2021-10-22T15:48:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T13:15:00Z\",\r\n              \"in\": \"2021-10-22T16:08:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N4\",\r\n                \"parkingSpot\": \"N4\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"60\",\r\n                \"parkingSpot\": \"60\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": {\r\n              \"out\": \"2021-10-22T13:22:00Z\",\r\n              \"in\": \"2021-10-22T16:23:00Z\",\r\n              \"on\": \"2021-10-22T16:09:00Z\",\r\n              \"off\": \"2021-10-22T13:41:00Z\"\r\n            },\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": null,\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N922VA\",\r\n              \"fleetType\": \"A321\",\r\n              \"fleetSeries\": \"A321\",\r\n              \"iataAircraftCode\": \"321\",\r\n              \"oagFleetCode\": \"321\",\r\n              \"manufacturer\": \"AIRBUS\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8868059\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_404_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T16:45:09.3930000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"IN\",\r\n        \"operatingFlightNumber\": \"1041\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T14:00:00Z\",\r\n              \"in\": \"2021-10-22T16:45:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T14:00:00Z\",\r\n              \"in\": \"2021-10-22T16:31:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N1\",\r\n                \"parkingSpot\": \"N1\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"65A\",\r\n                \"parkingSpot\": \"65A\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": {\r\n              \"out\": \"2021-10-22T13:55:00Z\",\r\n              \"in\": \"2021-10-22T16:42:00Z\",\r\n              \"on\": \"2021-10-22T16:25:00Z\",\r\n              \"off\": \"2021-10-22T14:08:00Z\"\r\n            },\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"6103\",\r\n                \"marketingAirlineCode\": \"KE\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"5087\",\r\n                \"marketingAirlineCode\": \"LA\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N592AS\",\r\n              \"fleetType\": \"737-800E\",\r\n              \"fleetSeries\": \"737-800\",\r\n              \"iataAircraftCode\": \"73H\",\r\n              \"oagFleetCode\": \"73H\",\r\n              \"manufacturer\": \"BOEING\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867743\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_1041_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T18:21:52.4560000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"IRROP\",\r\n        \"operatingFlightNumber\": \"304\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 2,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T15:30:00Z\",\r\n              \"in\": \"2021-10-22T18:15:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T15:33:00Z\",\r\n              \"in\": \"2021-10-22T18:09:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N15\",\r\n                \"parkingSpot\": \"N15\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"62\",\r\n                \"parkingSpot\": \"62\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": {\r\n              \"out\": \"2021-10-22T15:29:00Z\",\r\n              \"in\": \"2021-10-22T18:20:00Z\",\r\n              \"on\": \"2021-10-22T18:06:00Z\",\r\n              \"off\": \"2021-10-22T15:49:00Z\"\r\n            },\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"5093\",\r\n                \"marketingAirlineCode\": \"LA\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N918AK\",\r\n              \"fleetType\": \"737-M9E\",\r\n              \"fleetSeries\": \"737-9\",\r\n              \"iataAircraftCode\": \"7M9\",\r\n              \"oagFleetCode\": \"7M9\",\r\n              \"manufacturer\": \"BOEING\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867488\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_304_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T17:35:07.3030000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"ETA\",\r\n        \"operatingFlightNumber\": \"444\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T16:55:00Z\",\r\n              \"in\": \"2021-10-22T19:40:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T16:55:00Z\",\r\n              \"in\": \"2021-10-22T19:56:00Z\",\r\n              \"delayInformation\": [\r\n                {\r\n                  \"code\": \"00\",\r\n                  \"order\": \"1\",\r\n                  \"minutes\": \"1\",\r\n                  \"description\": \"On Time\",\r\n                  \"reason\": \"ON-TIME\",\r\n                  \"subDelayInformationList\": null\r\n                }\r\n              ]\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"D4\",\r\n                \"parkingSpot\": \"D4\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"69A\",\r\n                \"parkingSpot\": \"69A\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": {\r\n              \"out\": \"2021-10-22T16:56:00Z\",\r\n              \"in\": null,\r\n              \"on\": null,\r\n              \"off\": \"2021-10-22T17:34:00Z\"\r\n            },\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"5098\",\r\n                \"marketingAirlineCode\": \"LA\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"2090\",\r\n                \"marketingAirlineCode\": \"QR\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"1265\",\r\n                \"marketingAirlineCode\": \"SQ\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N919AK\",\r\n              \"fleetType\": \"737-M9E\",\r\n              \"fleetSeries\": \"737-9\",\r\n              \"iataAircraftCode\": \"7M9\",\r\n              \"oagFleetCode\": \"7M9\",\r\n              \"manufacturer\": \"BOEING\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867886\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_444_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T13:12:01.9960000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEDEPARTURE\",\r\n        \"operatingFlightNumber\": \"1436\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T18:40:00Z\",\r\n              \"in\": \"2021-10-22T21:25:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T18:40:00Z\",\r\n              \"in\": \"2021-10-22T21:18:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N5\",\r\n                \"parkingSpot\": \"N5\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"65A\",\r\n                \"parkingSpot\": \"65A\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"3440\",\r\n                \"marketingAirlineCode\": \"QR\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N851VA\",\r\n              \"fleetType\": \"A32B\",\r\n              \"fleetSeries\": \"A328\",\r\n              \"iataAircraftCode\": \"320\",\r\n              \"oagFleetCode\": \"328\",\r\n              \"manufacturer\": \"AIRBUS\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867738\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_1436_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T13:12:13.9020000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEDEPARTURE\",\r\n        \"operatingFlightNumber\": \"416\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T20:00:00Z\",\r\n              \"in\": \"2021-10-22T22:48:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T20:00:00Z\",\r\n              \"in\": \"2021-10-22T22:48:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N1\",\r\n                \"parkingSpot\": \"N1\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"69A\",\r\n                \"parkingSpot\": \"69A\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"6105\",\r\n                \"marketingAirlineCode\": \"KE\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"5081\",\r\n                \"marketingAirlineCode\": \"LA\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N921VA\",\r\n              \"fleetType\": \"A321\",\r\n              \"fleetSeries\": \"A321\",\r\n              \"iataAircraftCode\": \"321\",\r\n              \"oagFleetCode\": \"321\",\r\n              \"manufacturer\": \"AIRBUS\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867921\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_416_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T12:33:34.6550000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEDEPARTURE\",\r\n        \"operatingFlightNumber\": \"35\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T21:50:00Z\",\r\n              \"in\": \"2021-10-23T00:34:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T21:50:00Z\",\r\n              \"in\": \"2021-10-23T00:34:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N13\",\r\n                \"parkingSpot\": \"N13\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"65A\",\r\n                \"parkingSpot\": \"65A\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": null,\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N296AK\",\r\n              \"fleetType\": \"737-900R\",\r\n              \"fleetSeries\": \"737-900\",\r\n              \"iataAircraftCode\": \"9XR\",\r\n              \"oagFleetCode\": \"73J\",\r\n              \"manufacturer\": \"BOEING\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867914\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_35_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T16:44:38.2400000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEARRIVAL\",\r\n        \"operatingFlightNumber\": \"398\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-22Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T22:55:00Z\",\r\n              \"in\": \"2021-10-23T01:39:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-22T22:55:00Z\",\r\n              \"in\": \"2021-10-23T01:39:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"D4\",\r\n                \"parkingSpot\": \"D4\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"60\",\r\n                \"parkingSpot\": \"60\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"6101\",\r\n                \"marketingAirlineCode\": \"KE\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"5080\",\r\n                \"marketingAirlineCode\": \"LA\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"3726\",\r\n                \"marketingAirlineCode\": \"QF\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"2038\",\r\n                \"marketingAirlineCode\": \"QR\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N848VA\",\r\n              \"fleetType\": \"A32B\",\r\n              \"fleetSeries\": \"A328\",\r\n              \"iataAircraftCode\": \"320\",\r\n              \"oagFleetCode\": \"328\",\r\n              \"manufacturer\": \"AIRBUS\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867861\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_398_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T07:15:01.4270000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEARRIVAL\",\r\n        \"operatingFlightNumber\": \"1092\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-23Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-23T00:50:00Z\",\r\n              \"in\": \"2021-10-23T03:34:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-23T00:50:00Z\",\r\n              \"in\": \"2021-10-23T03:34:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"D4\",\r\n                \"parkingSpot\": \"D4\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"62\",\r\n                \"parkingSpot\": \"62\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"6025\",\r\n                \"marketingAirlineCode\": \"KE\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"3738\",\r\n                \"marketingAirlineCode\": \"QF\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"1267\",\r\n                \"marketingAirlineCode\": \"SQ\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N835VA\",\r\n              \"fleetType\": \"A32B\",\r\n              \"fleetSeries\": \"A328\",\r\n              \"iataAircraftCode\": \"320\",\r\n              \"oagFleetCode\": \"328\",\r\n              \"manufacturer\": \"AIRBUS\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867628\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_1092_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T15:22:55.4880000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEDEPARTURE\",\r\n        \"operatingFlightNumber\": \"1196\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-23Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-23T02:45:00Z\",\r\n              \"in\": \"2021-10-23T05:29:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-23T02:45:00Z\",\r\n              \"in\": \"2021-10-23T05:29:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"D4\",\r\n                \"parkingSpot\": \"D4\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"64A\",\r\n                \"parkingSpot\": \"64\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": [\r\n              {\r\n                \"marketingFlightNumber\": \"7625\",\r\n                \"marketingAirlineCode\": \"FI\"\r\n              },\r\n              {\r\n                \"marketingFlightNumber\": \"1323\",\r\n                \"marketingAirlineCode\": \"SQ\"\r\n              }\r\n            ],\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N843VA\",\r\n              \"fleetType\": \"A32B\",\r\n              \"fleetSeries\": \"A328\",\r\n              \"iataAircraftCode\": \"320\",\r\n              \"oagFleetCode\": \"328\",\r\n              \"manufacturer\": \"AIRBUS\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867657\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_1196_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    },\r\n    {\r\n      \"flightDetails\": {\r\n        \"sourceSystemName\": \"VISOPS\",\r\n        \"sourceSystemLastModifiedDateTimeUtc\": \"2021-10-22T17:22:06.5250000Z\",\r\n        \"schemaVersion\": \"1.0\",\r\n        \"lastEventType\": \"PAXGATEDEPARTURE\",\r\n        \"operatingFlightNumber\": \"370\",\r\n        \"scheduledFlightOriginationDateUTC\": \"2021-10-23Z\",\r\n        \"scheduledFlightOriginationDateLocal\": \"2021-10-22\",\r\n        \"flightLegs\": [\r\n          {\r\n            \"legNumber\": 1,\r\n            \"scheduledDateTimeUTC\": {\r\n              \"out\": \"2021-10-23T04:15:00Z\",\r\n              \"in\": \"2021-10-23T06:59:00Z\"\r\n            },\r\n            \"estimatedDateTimeUTC\": {\r\n              \"out\": \"2021-10-23T04:15:00Z\",\r\n              \"in\": \"2021-10-23T06:59:00Z\",\r\n              \"delayInformation\": null\r\n            },\r\n            \"actualDepartureStation\": {\r\n              \"airportCode\": \"SEA\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"N20\",\r\n                \"parkingSpot\": \"N20\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualArrivalStation\": {\r\n              \"airportCode\": \"LAX\",\r\n              \"zuluOffset\": -7,\r\n              \"gate\": {\r\n                \"podium\": \"65C\",\r\n                \"parkingSpot\": \"65C\",\r\n                \"carousel\": null\r\n              },\r\n              \"countryCode2Letters\": \"US\",\r\n              \"countryCode3Letters\": \"USA\"\r\n            },\r\n            \"actualdatetimeutc\": null,\r\n            \"irropsType\": null,\r\n            \"opsReason\": null,\r\n            \"scheduledArrivalStation\": {\r\n              \"airportCode\": \"LAX\"\r\n            },\r\n            \"scheduledDepartureStation\": {\r\n              \"airportCode\": \"SEA\"\r\n            },\r\n            \"codeShares\": null,\r\n            \"aircraft\": {\r\n              \"aircraftRegistration\": \"N274AK\",\r\n              \"fleetType\": \"737-900R\",\r\n              \"fleetSeries\": \"737-900\",\r\n              \"iataAircraftCode\": \"9XR\",\r\n              \"oagFleetCode\": \"73J\",\r\n              \"manufacturer\": \"BOEING\",\r\n              \"reservationSystemEquipmentTypeCode\": null\r\n            },\r\n            \"iataFlightServiceType\": \"SCHEDULED\",\r\n            \"isETOPSFlight\": false,\r\n            \"flightRangeCode\": null,\r\n            \"operatingAirlineCode\": \"AS\",\r\n            \"operatingAirlineName\": \"Alaska Airlines\",\r\n            \"sourceInternalId\": \"8867732\",\r\n            \"scheduledDepartureDateStnLocal\": \"2021-10-22\",\r\n            \"onwardOperatingAirlineCode\": null,\r\n            \"onwardOperatingFlightNumber\": null\r\n          }\r\n        ]\r\n      },\r\n      \"flightLookupKey\": \"AS_370_SEA_2021-10-22\",\r\n      \"updateCount\": 0\r\n    }\r\n  ],\r\n  \"actionResult\": {\r\n    \"code\": 200,\r\n    \"messages\": [\r\n      \"Success\"\r\n    ]\r\n  }\r\n}";
            FlightsResponse flightsResponse = JsonConvert.DeserializeObject<FlightsResponse>(content);

            Assert.AreEqual(11, flightsResponse.Flights.Count);
            Assert.AreEqual(1, flightsResponse.Flights.First().FlightDetails.FlightLegs.Count);
            Assert.AreEqual(new DateTime(2021, 10, 22, 16, 8, 0), flightsResponse.Flights.First().FlightDetails.FlightLegs.First().EstimatedDateTimeUTC.In);
        }
    }
}